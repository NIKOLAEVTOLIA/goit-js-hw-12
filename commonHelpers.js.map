{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\nfunction createGalleryItem(result) {\n    const resultItem = document.createElement('li');\n    const imgElement = document.createElement('img');\n    const aElement = document.createElement('a');\n    const infoElement = document.createElement(\"div\");\n\n    imgElement.src = result.webformatURL;\n    imgElement.alt = result.tags;\n\n    aElement.href = result.largeImageURL;\n    aElement.appendChild(imgElement);\n\n    infoElement.classList.add('image-info');\n    infoElement.innerHTML = `\n        <p class=\"likes\">Likes <span>${result.likes}</span></p>\n        <p class=\"views\">Views <span>${result.views}</span></p>\n        <p class=\"comments\">Comments <span>${result.comments}</span></p>\n        <p class=\"downloads\">Downloads <span>${result.downloads}</span></p>\n    `;\n\n    resultItem.appendChild(aElement);\n    resultItem.appendChild(infoElement);\n\n    return resultItem;\n}\n\nlet currentPage = 1;\nconst perPage = 40;\nlet currentSearchQuery = '';\nlet apiKey = '41728884-677575adccc9f2c5ba20b621f';\nlet gallery = document.querySelector(\".gallery\");\n\ndocument.querySelector(\".form-search\").addEventListener(\"submit\", async function (event) {\n    event.preventDefault();\n\n    const loader = document.querySelector(\"span.loader\");\n    const loadMoreBtn = document.querySelector(\".button-loadmore\");\n\n    gallery.innerHTML = '';\n    loader.classList.add('visible');\n    loadMoreBtn.classList.remove('visible');\n\n    const searchImg = document.querySelector(\".text-input\").value;\n\n    const params = {\n        key: apiKey,\n        q: searchImg,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: perPage,\n    };\n\n    const searchParams = new URLSearchParams(params);\n    const apiUrl = `https://pixabay.com/api/?${searchParams}`;\n\n    try {\n        const response = await axios.get(apiUrl);\n        const data = response.data;\n\n        loader.classList.remove('visible');\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                position: 'topRight',\n                messageColor: '#FAFAFB',\n                backgroundColor: '#EF4040'\n            });\n        } else {\n            data.hits.forEach(result => {\n                const resultItem = createGalleryItem(result);\n                gallery.appendChild(resultItem);\n            });\n\n            const modal = new SimpleLightbox('.gallery a', {\n                captionsData: 'alt',\n                captionDelay: 250,\n            });\n\n            modal.refresh();\n\n            if (data.hits.length === perPage) {\n                loadMoreBtn.classList.add('visible');\n            }\n        }\n    } catch (error) {\n        console.error(\"Error fetching search results:\", error);\n        loader.classList.remove('visible');\n    }\n});\n\ndocument.querySelector(\".button-loadmore\").addEventListener(\"click\", async function () {\n    const loaderMore = document.querySelector(\".loader-loadmore\");\n    const loadMoreBtn = document.querySelector(\".button-loadmore\");\n\n    loaderMore.classList.add('visible');\n    loadMoreBtn.classList.remove('visible');\n\n    try {\n        currentPage++;\n        const paramsMore = {\n            key: apiKey,\n            q: currentSearchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: currentPage,\n            per_page: perPage,\n        };\n\n        const searchParamsMore = new URLSearchParams(paramsMore);\n        const apiUrlMore = `https://pixabay.com/api/?${searchParamsMore}`;\n        const responseMore = await axios.get(apiUrlMore);\n        const dataMore = responseMore.data;\n\n        loaderMore.classList.remove('visible');\n\n        if (dataMore.hits.length > 0) {\n            dataMore.hits.forEach(result => {\n                const resultItem = createGalleryItem(result);\n                gallery.appendChild(resultItem);\n            });\n\n            const modalMore = new SimpleLightbox('.gallery a', {\n                captionsData: 'alt',\n                captionDelay: 250,\n            });\n\n            modalMore.refresh();\n\n            makeSmoothScrolling();\n            \n            if (currentPage * perPage >= dataMore.totalHits) {\n                loadMoreBtn.classList.remove('visible');\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                    messageColor: '#FAFAFB',\n                    backgroundColor: '#3498db'\n                });\n            } else {\n                loadMoreBtn.classList.add('visible');\n            }\n        } else {\n            loadMoreBtn.classList.remove('visible');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                messageColor: '#FAFAFB',\n                backgroundColor: '#3498db'\n            });\n        }\n    } catch (error) {\n        console.error(\"Error fetching more results:\", error);\n        loaderMore.classList.remove('visible');\n        loadMoreBtn.classList.add('visible');\n    }\n});\n\nfunction makeSmoothScrolling() {\n    const galleryItemHeight = document.querySelector('.gallery li').getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: galleryItemHeight * 2,\n        left: 0,\n        behavior: 'smooth'\n    });\n}"],"names":["createGalleryItem","result","resultItem","imgElement","aElement","infoElement","currentPage","perPage","currentSearchQuery","apiKey","gallery","event","loader","loadMoreBtn","searchImg","params","apiUrl","data","axios","iziToast","SimpleLightbox","error","loaderMore","paramsMore","apiUrlMore","dataMore","makeSmoothScrolling","galleryItemHeight"],"mappings":"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"}